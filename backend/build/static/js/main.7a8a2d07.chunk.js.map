{"version":3,"sources":["components/filter.js","components/form.js","components/list.js","services/axios.js","App.js","index.js"],"names":["Filter","props","useState","word","setWord","handleFilter","ev","code","handleSearch","onChange","target","value","onBlur","onKeyPress","type","name","Form","newName","setNewName","newPhone","setNewPhone","onSubmit","preventDefault","handleClick","number","List","handleDelete","persons","handleDel","console","log","parentNode","id","findit","find","pers","window","confirm","map","onClick","baseUrl","axios","get","then","response","data","delete","resp","catch","err","post","put","App","setPersons","filteredList","setFilterList","errorMessage","setErrorMessage","updateData","setUpdateData","useEffect","axiosServ","className","color","mess","newPerson","toLowerCase","status","prev","setTimeout","statusText","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7a8a2d07.chunk.js","sourcesContent":["import React, { useState } from \"react\";\n\nconst Filter = (props) => {\n  const [word, setWord] = useState(\"\");\n\n  const handleSearch = (ev) => {\n    setWord(ev.target.value);\n  };\n  const handleFilter = (ev) => {\n    if (ev.code === \"Enter\") props.handleSearch(word);\n  };\n\n  return (\n    <div>\n      <h2>Filter by: </h2>\n      name:{\" \"}\n      <input\n        onChange={handleSearch}\n        onBlur={handleFilter}\n        onKeyPress={handleFilter}\n        type=\"text\"\n        name=\"filter\"\n        value={word}\n      />\n    </div>\n  );\n};\nexport default Filter;\n","import React, { useState } from \"react\";\n\nconst Form = (props) => {\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n\n  const handleNameChange = (ev) => {\n    setNewName(ev.target.value);\n  };\n  const handlePhoneChange = (ev) => {\n    setNewPhone(ev.target.value);\n  };\n  const handleClick = (ev) => {\n    ev.preventDefault();\n    props.handleClick({ name: newName, number: newPhone });\n    setNewName(\"\");\n    setNewPhone(\"\");\n  };\n  return (\n    <form onSubmit={handleClick}>\n      <div>\n        name:{\" \"}\n        <input\n          onChange={handleNameChange}\n          type=\"text\"\n          name=\"name\"\n          value={newName}\n        />\n      </div>\n      <div>\n        number:{\" \"}\n        <input\n          onChange={handlePhoneChange}\n          type=\"number\"\n          name=\"phone\"\n          value={newPhone}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\nexport default Form;\n","import React from \"react\";\n\nconst List = ({ handleDelete, persons }) => {\n  const handleDel = (ev) => {\n    console.log(ev.target.parentNode.id);\n    const findit = persons.find((pers) => pers.id == ev.target.parentNode.id);\n    console.log(findit);\n    if (findit) {\n      const result = window.confirm(`Confirm delete ${findit.name}`);\n      if (result) handleDelete(ev.target.parentNode.id);\n    }\n  };\n\n  return (\n    <>\n      {persons.map((pers) => (\n        <li key={pers.id}>\n          <p id={pers.id}>\n            <span>{pers.name}</span>\n            {\": \"}\n            {pers.number}\n            {\"   \"}\n            <button onClick={handleDel}>Delete</button>\n          </p>\n        </li>\n      ))}\n    </>\n  );\n};\nexport default List;\n","import axios from \"axios\";\n// const baseUrl = \"http://localhost:3001/api/persons\";\nconst baseUrl = \"https://fierce-dawn-31208.herokuapp.com/api/persons\";\n\nconst getPhones = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\nconst addItem = (pers) => {\n  const request = axios.post(baseUrl, pers);\n  return request.then((resp) => resp.data);\n};\nconst find = (word) => {\n  const req = axios.get(baseUrl + \"/\" + word);\n  return req.then((resp) => resp.data);\n};\nconst deleteItem = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((resp) => resp).catch((err) => err);\n};\nconst updateData = (pers) => {\n  const request = axios.put(`${baseUrl}/${pers.id}`, pers);\n  return request.then((resp) => resp);\n};\n\nexport default { getPhones, deleteItem, addItem, find, updateData };\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/filter\";\nimport Form from \"./components/form\";\nimport List from \"./components/list\";\nimport axiosServ from \"./services/axios\";\n\nimport \"./App.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filteredList, setFilterList] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [updateData, setUpdateData] = useState(false);\n  //Initial Data\n  // useEffect(() => {\n  //   //fetch to localhost:3001\n  //   axiosServ.getPhones().then((response) => {\n  //     console.log(\"here\", response);\n  //     setPersons(response);\n  //   });\n  // }, []);\n\n  //update\n  useEffect(() => {\n    //fetch to localhost:3001\n    axiosServ.getPhones().then((response) => {\n      setPersons(response);\n    });\n  }, [updateData]);\n\n  const handleClick = (newPerson) => {\n    let findit = persons.find(\n      (pers) => pers.name.toLowerCase() === newPerson.name.toLowerCase()\n    );\n    if (findit) {\n      findit = { ...findit, number: newPerson.number };\n      axiosServ\n        .updateData(findit)\n        .then((resp) => {\n          if (resp.status === 200) {\n            setErrorMessage({\n              mess: `User ${findit.name} updated`,\n              color: \"green\",\n            });\n            setUpdateData((prev) => !prev);\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 2000);\n          } else {\n            console.log(resp);\n            setErrorMessage({\n              mess: resp,\n              color: \"red\",\n            });\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 3000);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          setErrorMessage({\n            mess: err.errorMessage,\n            color: \"red\",\n          });\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 3000);\n        });\n    } else {\n      axiosServ\n        .addItem(newPerson)\n        .then((response) => {\n          setUpdateData((prev) => !prev);\n          setErrorMessage({\n            mess: `${newPerson.name} has already added to server`,\n            color: \"green\",\n          });\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        })\n        .catch((err) => {\n          setErrorMessage({\n            mess: err.errorMessage,\n            color: \"red\",\n          });\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 3000);\n        });\n    }\n  };\n\n  const handleSearch = (word) => {\n    console.log(word);\n    axiosServ.find(word).then((resp) => {\n      setFilterList(resp);\n    });\n  };\n\n  const handleDelete = (id) => {\n    axiosServ.deleteItem(id).then((resp) => {\n      if (resp.status === 204) {\n        setErrorMessage({\n          mess: `Phone was already removed from server`,\n          color: \"red\",\n        });\n        setUpdateData((prev) => !prev);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 2000);\n      } else {\n        const mess = resp.response.statusText;\n        console.log(mess);\n        setErrorMessage({\n          mess: resp.response.statusText,\n          color: \"red\",\n        });\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 3000);\n      }\n    });\n  };\n\n  return (\n    <div className=\"home\">\n      <h1>Phonebook</h1>\n      {errorMessage != null ? (\n        <div className={`error error_${errorMessage.color}`}>\n          {errorMessage.mess}\n        </div>\n      ) : (\n        <></>\n      )}\n      <Filter handleSearch={handleSearch} />\n      <h2>Add new One</h2>\n      <Form handleClick={handleClick} />\n      <h2>Numbers</h2>\n      <ul>\n        <List handleDelete={handleDelete} persons={filteredList || persons} />\n      </ul>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}