(this.webpackJsonptemplate=this.webpackJsonptemplate||[]).push([[0],{21:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),o=n.n(r),u=n(15),a=n.n(u),s=(n(21),n(6)),i=n(3),l=function(e){var t=Object(r.useState)(""),n=Object(i.a)(t,2),o=n[0],u=n[1],a=function(t){"Enter"===t.code&&e.handleSearch(o)};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Filter by: "}),"name:"," ",Object(c.jsx)("input",{onChange:function(e){u(e.target.value)},onBlur:a,onKeyPress:a,type:"text",name:"filter",value:o})]})},d=function(e){var t=Object(r.useState)(""),n=Object(i.a)(t,2),o=n[0],u=n[1],a=Object(r.useState)(""),s=Object(i.a)(a,2),l=s[0],d=s[1];return Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.handleClick({name:o,number:l}),u(""),d("")},children:[Object(c.jsxs)("div",{children:["name:"," ",Object(c.jsx)("input",{onChange:function(e){u(e.target.value)},type:"text",name:"name",value:o})]}),Object(c.jsxs)("div",{children:["number:"," ",Object(c.jsx)("input",{onChange:function(e){d(e.target.value)},type:"number",name:"phone",value:l})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.handleDelete,n=e.persons,r=function(e){console.log(e.target.parentNode.id);var c=n.find((function(t){return t.id==e.target.parentNode.id}));(console.log(c),c)&&(window.confirm("Confirm delete ".concat(c.name))&&t(e.target.parentNode.id))};return Object(c.jsx)(c.Fragment,{children:n.map((function(e){return Object(c.jsx)("li",{children:Object(c.jsxs)("p",{id:e.id,children:[Object(c.jsx)("span",{children:e.name}),": ",e.number,"   ",Object(c.jsx)("button",{onClick:r,children:"Delete"})]})},e.id)}))})},f=n(4),b=n.n(f),h="https://fierce-dawn-31208.herokuapp.com/api/persons",m=function(){return b.a.get(h).then((function(e){return e.data}))},O=function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e})).catch((function(e){return e}))},p=function(e){return b.a.post(h,e).then((function(e){return e.data}))},x=function(e){return b.a.get(h+"/"+e).then((function(e){return e.data}))},g=function(e){return b.a.put("".concat(h,"/").concat(e.id),e).then((function(e){return e}))},v=(n(40),function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],u=Object(r.useState)(""),a=Object(i.a)(u,2),f=a[0],b=a[1],h=Object(r.useState)(null),v=Object(i.a)(h,2),S=v[0],w=v[1],y=Object(r.useState)(!1),C=Object(i.a)(y,2),T=C[0],k=C[1];Object(r.useEffect)((function(){m().then((function(e){o(e)}))}),[T]);return Object(c.jsxs)("div",{className:"home",children:[Object(c.jsx)("h1",{children:"Phonebook"}),null!=S?Object(c.jsx)("div",{className:"error error_".concat(S.color),children:S.mess}):Object(c.jsx)(c.Fragment,{}),Object(c.jsx)(l,{handleSearch:function(e){console.log(e),x(e).then((function(e){b(e)}))}}),Object(c.jsx)("h2",{children:"Add new One"}),Object(c.jsx)(d,{handleClick:function(e){var t=n.find((function(t){return t.name.toLowerCase()===e.name.toLowerCase()}));t?(t=Object(s.a)(Object(s.a)({},t),{},{number:e.number}),g(t).then((function(e){200===e.status?(w({mess:"User ".concat(t.name," updated"),color:"green"}),k((function(e){return!e})),setTimeout((function(){w(null)}),2e3)):(console.log(e),w({mess:e,color:"red"}),setTimeout((function(){w(null)}),3e3))})).catch((function(e){console.log(e),w({mess:e.errorMessage,color:"red"}),setTimeout((function(){w(null)}),3e3)}))):p(e).then((function(t){k((function(e){return!e})),w({mess:"".concat(e.name," has already added to server"),color:"green"}),setTimeout((function(){w(null)}),5e3)})).catch((function(e){w({mess:e.errorMessage,color:"red"}),setTimeout((function(){w(null)}),3e3)}))}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)("ul",{children:Object(c.jsx)(j,{handleDelete:function(e){O(e).then((function(e){if(204===e.status)w({mess:"Phone was already removed from server",color:"red"}),k((function(e){return!e})),setTimeout((function(){w(null)}),2e3);else{var t=e.response.statusText;console.log(t),w({mess:e.response.statusText,color:"red"}),setTimeout((function(){w(null)}),3e3)}}))},persons:f||n})})]})});a.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.7a8a2d07.chunk.js.map